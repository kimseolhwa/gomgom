<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="bitcamp.java77.dao.JoinDao">

  <resultMap type="join" id="joinMap">
    <id 	column="bno" 		property="no"/>
    <result column="CONT" 	property="content"/>
    <result column="afile" 		property="attachFile"/>
  </resultMap>

	<select id="loginCheck" parameterType="join" resultType="int">
		select  COUNT(*)  from user where email = #{email}
	</select>


	<select id="selectList" resultMap="joinMap" parameterType="map">
    select 
      bno,
      title,
      cont,
      price,
      url,
      afile 
    from board
    order by 
    <choose>
      <when test="keyword == 'title'">title </when>
      <when test="keyword == 'views'">views </when>
      <otherwise>bno desc</otherwise>
    </choose>
  </select>
   
  <insert id="insert" parameterType="join">
  
    insert into board(title,cont,price,url,afile) 
    values(#{title},#{content},#{price},#{url},#{attachFile})
  </insert>

	<!-- <insert id="insertBoard" parameterType="boardVO" >
		<selectKey keyProperty="no" order="BEFORE" resultType="int">
			select seq_t77_mini_board_no.nextVal
			from dual
		</selectKey>
		insert into t77_mini_board(
		no, writer, title, content
		) values (
		#{no},
		#{writer}, #{title}, #{content}
		)
	</insert> -->



  <insert id="memberJoin" parameterType="join" >
  
    insert into user(NAME,PWD,EMAIL) 
    values(#{name},#{pwd},#{email})
  </insert>

  
  
  <select id="selectNo" resultType="int">
		select max(uno) from user
	</select>
  
  
  
  <insert id="registTag" parameterType="join" >
  
    insert into USER_TAG(UNO,TNO) 
    values(#{utNo},#{tNo})
  </insert>
  
  
</mapper>






