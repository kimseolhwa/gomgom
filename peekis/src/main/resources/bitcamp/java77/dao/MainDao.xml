<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="bitcamp.java77.dao.MainDao">

	<resultMap type="wish" id="wishMap">
		<id column="wno" property="no" />
		<result column="FPATH" property="path" />
		<result column="CONT" property="content" />
	</resultMap>

	<select id="selectList" resultMap="wishMap" parameterType="map">
		select wno, fpath, title, cont, price, url, buy, date
		from wish
		order by
		<choose>
			<when test="keyword == 'title'">title </when>
			<when test="keyword == 'price'">price </when>
			<otherwise>wno desc</otherwise>
		</choose>
	</select>

	<select id="selectNo" resultType="int">
		select max(wno) from wish
	</select>
	
	<select id="selectOne" resultMap="wishMap" parameterType="int">
		select wno, fpath, title, cont, price, url, date from wish where wno=#{no}
	</select>
	
	<update id="copyItem" parameterType="int">
		update wish AS A Inner JOIN wish AS B
			on A.wno=#{no} = B.wno=#{no}
		   SET A.fpath=B.fpath, A.title=B.title, A.cont=B.cont, A.price=B.price, A.url=B.url, A.date=B.date
		 where A.wno=#{no} = B.wno=#{no};
	</update>

</mapper>