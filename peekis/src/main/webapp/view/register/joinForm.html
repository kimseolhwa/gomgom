<!DOCTYPE html>
<html lang="en">

<head>

<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1">
<meta name="description" content="">
<meta name="author" content="">

<title>login-registration</title>

<!-- 부트스트랩 -->

<link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/css/bootstrap.min.css">
  
  <!-- 제이쿼리 -->
  
<script src="http://code.jquery.com/jquery-1.10.0.min.js"></script>
<script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.2/js/bootstrap.min.js"></script>

	<!-- 벨리데이션 체크 -->
    <link rel="stylesheet" href="../../dist/css/formValidation.css"/>
    <script type="text/javascript" src="../../dist/js/formValidation.js"></script>
    <script type="text/javascript" src="../../dist/js/framework/bootstrap.js"></script>

<!-- Custom Fonts -->
<link
	href="http://maxcdn.bootstrapcdn.com/font-awesome/4.1.0/css/font-awesome.min.css"
	rel="stylesheet" type="text/css">
<link
	href='http://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic'
	rel='stylesheet' type='text/css'>
<link
	href='http://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800'
	rel='stylesheet' type='text/css'>

<script type="text/javascript" src="../../js/common.js"></script>

<!-- btn-orange -->
<link rel="stylesheet" href="../../css/btn-orange.css">


<!-- header -->
<link rel="stylesheet" style="text/css" href="../../css/loginHeader.css" />

<!-- footer -->
<link rel="stylesheet" style="text/css" href="../../css/footer.css" />

<!-- 헤더푸터 위치 페이지 사이즈  조절 -->
<link rel="stylesheet" style="text/css" href="../../css/global.css"/>

<style type="text/css">

.upfo{
color: gray;
}

footer {
	position: fixed;
	height: 60px;
	bottom: 0;
}

/* 모달 토글 */

.container-fluid {
	text-align: center;
	align: center;
	border: none;
}


/* 이미지 클릭(팔로우) */

.check{
	display : inline-block; !important;
	
}

 .uncheckedborder {
/* 	border: 5px solid rgb(242,132,53) !important; */
    -webkit-filter: grayscale(0.1%) !important;
	border :  outset #DEDEDE !important; 
	border-width: 2px 1px 6px 1px !important;
	border-top-color: #F0F0F0 !important;
}  

/*  .uncheckedborder {
   -webkit-filter: checkImg 0.5s forwards !important;
}

@-webkit-keyframes checkImg {
 from{
     filter:alpha(opacity=100);
 }
 to{
   filter:alpha(opacity=100);
  }
  */
} 

/* 모달 설정 */
.modal-body {
    position:relative; /* This avoids image to go off the container */
    overflow: visible;
}
.modal-content{
 position:relative;
 max-width: 820px;
}

.modal-header{
 background-color: #e9e9e9;
}

/* 이미지 */
.img-check {
    width:170px;
    height: 140px;
     border: none;
     border-radius: 5%; 
     margin: 3px;
     -webkit-box-shadow:  2px 3px 4px #C3D1D6;
     padding: 0px;
/*      #D9DEDC */
         -webkit-filter: grayscale(100%); /* Chrome, Safari, Opera */
}

.img-check:hover{
/* opacity:0.85; */
   -webkit-filter: grayscale(1%);
}

.col-md-3{
 display: inline-block;
}

/* 캡션 */
 
.modal-header>.asd>span {
/*    display : inline-block;  */
  border-radius : 8px;
  background: #A1CC9F;
  text-align : center;
  color : white;
  font-weight : bold;
  margin-right : 5px;
  border-style: dashed;
  border-width: 0.2px;
  font-size: x-large;
}

/* 캡션 내용 */
.modal-body>.row>div>div {
	position : absolute;
	padding : 5px;
	margin:12px;
 	/* background-color : rgba(0,0,0,0.4); */ 
	text-align : center;
 	border-radius : 3px; 
	font-weight : bold;
	text-shadow: 1px 1px 1px black;
	z-index:1;
	color : white;
}

</style>
<script>

	$(document).ready(function() {
		
		
	 /* 가입 데이터 전송 1 */
// 		   $('#registIn').on('click', function(){
//         var data_value = $('#name').val();
//         var data_value2 = $('#email').val();
//         var data_value3 = $('#password').val();
//         var url = 'ajax/join.do';
//     $.ajax({
//             type: "POST",
//         url: url,
//         data:{'name':data_value,
//                        'email': data_value2,
//                         'pwd': data_value3},
//         success:function(){   
//      		/* 로그인 데이터 전송 후 팔로우 선택지로 */
//     		$("#myModal").modal("show");
     		
//         }
//     });
// });  
	 

 		/* 첫 페이지에서 가입 데이터 전송  */
	/*   $('#registIn').on('click', function(){
		 var data_value = $('#name').val();
  	 	  var data_value2 = $('#email').val();
    	  var data_value3 = $('#password').val();
    	  
    	  alert("자 이제 콘트롤러에 들어갈거야")
    	  
    	  $.ajax({
    		  type: "POST",
    		  dataType:"JSON",
    	 	  url : 'http://localhost:8008/peekis/join/ajax/loginCk.do',
    	 	  data:{'email': data_value2}
    	  }).done(function() {
    		  
    		  alert("중복검사 완료 , done으로 들어왔음")
    		  alert(data)
    		  console.log("status : " + status + ", data :  " + data + " a : " + a)
    		  
    		  
    		  
  		 }).fail(function(status,data) {
    		  alert("fail")
  			 console.log(data);
  		  })
    	  
	  }); */
	  
	
	  
// 	   $('#registIn').on('submit', function(){
			
		   
// 		  data_value = $('#name').val();
//   	 	  data_value2 = $('#email').val();
//     	  data_value3 = $('#password').val();
    	  
//     	  alert("자 이제 콘트롤러에 들어갈거야")
    	  
//     	  $.ajax({
//     		  type: "POST",
//     		  dataType:"JSON",
//     	 	  url : 'http://localhost:8008/peekis/join/ajax/loginCk.do',
//     	 	  data:{'email': data_value2},
    	 	
//     	  }).done(function(resultObj) {
//   			alert("done");			 
//   			 if(resultObj.ajaxResult.data>0){
//   				 alert("중복되는 값 있음")
//   				 $(".dupEmailCk").text("중복되는 EMAIL 입니다. EMAIL을 다시 입력하세요.");
//   			 }else{
//   				alert("중복되는 값 없음")
//   				$("#myModal").modal("show");
//   			 }
//   		 })
  		 
// 	  }); 
	  	
	  	
	  
	     var nameVal = $('#name').val();
		 var emailVal = $('#email').val();
		 var pwdVal = $('#password').val();
	  
		/* 모달창에서 데이터 전송  */
		$("#followbtn").on("click",function(){
			
		alert("name : " + data_value + " email : " + data_value2 +  " password : " + data_value3 +"\n" + "follow list : " + selList)	
			
			$.ajax({
        		type: "POST",
        		dataType:"JSON",
    			url: "http://localhost:8008/peekis/join/ajax/join.do",
     			data:{'name':data_value,
                      'email': data_value2,
                      'pwd': data_value3,
                     'selList': selList
                      }
 		 }).done(function(status) {
 			 console.log(status);
 			alert("전송 성공");
 			
 			// 페이지 이동
			  location.href ="../main/main2.html";
 			
 		 }).fail(function(status) {
 			 console.log(status);
 			alert("전송 실패");			 
 		  })
		});
		

	/* 벨리데이션 체크 */
	$('#defaultForm').formValidation({
			
	framework: 'bootstrap',	
			
        message: 'This value is not valid',
        
        err: {
            container: 'tooltip'
        },
        icon: {
            valid: 'glyphicon glyphicon-ok',
            invalid: 'glyphicon glyphicon-remove',
            validating: 'glyphicon glyphicon-refresh'
        },
        fields: {
        	name: {
	        	err: 'popover',
                validators: {
                    notEmpty: {
                        message: 'The first name is required and cannot be empty'
                    }
                }
            },
            email: {
                err: 'popover',
                validators: {
                    emailAddress: {

                    },
                    notEmpty: {
                        message: 'The email is required and cannot be empty'
                    }
                }
            },
            emailConfirm : {
                err: 'popover',
                validators: {
                    emailAddress: {

                    },
                    notEmpty: {
                        message: 'The email is not correct'
                    }
                }
            },
            password: {
                err: 'popover',
                validators: {
                    notEmpty: {
                        message: 'The password is required and cannot be empty'
                    },
                    stringLength: {
                        min: 6,
                        max: 30,
                        message: 'The password must be more than 6 and less than 30 characters long'
                    }
                }
            }
        }
    }).on('success.form.fv', function(){
		
		   
		  data_value = $('#name').val();
	 	  data_value2 = $('#email').val();
  	  	 data_value3 = $('#password').val();
  	  
  	  alert("자 이제 콘트롤러에 들어갈거야")
  	  
  	  $.ajax({
  		  type: "POST",
  		  dataType:"JSON",
  	 	  url : 'http://localhost:8008/peekis/join/ajax/loginCk.do',
  	 	  data:{'email': data_value2},
  	 	
  	  }).done(function(resultObj) {
			alert("done");			 
			 if(resultObj.ajaxResult.data>0){
				 alert("중복되는 값 있음")
				 $(".dupEmailCk").text("중복되는 EMAIL 입니다. EMAIL을 다시 입력해주세요!!");
				 
			 }else{
				alert("중복되는 값 없음")
				 $(".dupEmailCk").text("");
				$("#myModal").modal("show");
				
			 }
		 })
		 
		 return false;
	  }); 
    
    /* .on('success.form.fv', function(e) {
//     	$("#myModal").modal("show");
    	return false; 
    }); */
	
    /* .on('err.field.fv', function(e, data) {
        // $(e.target)  --> The field element
        // data.fv      --> The FormValidation instance
        // data.field   --> The field name
        // data.element --> The field element
			
        $('#myModal').modal("hide")
        data.fv.disableSubmitButtons(false);
    })
    .on('success.field.fv', function(e, data) {
        // e, data parameters are the same as in err.field.fv event handler
        // Despite that the field is valid, by default, the submit button will be disabled if all the following conditions meet
        // - The submit button is clicked
        // - The form is invalid
        if (data.fv.getInvalidFields().length > 0) {  // There is invalid field
        	alert(data.fv.getInvalidFields().length)
            data.fv.disableSubmitButtons(true);
        }
    }); */

	
	var selList ="" /* 모달창에서 셀렉트된 팔로우이름들 #로 분류 */
  
	/* 모달- 이미지 체크 토글 */
		$(".img-check").click(function() {
			
			var selItems = $(this).parent().prev().prev().val();

			
			if($(this).hasClass("uncheckedborder")){
				$(this).removeClass("uncheckedborder");
				selList = selList.replace("#"+selItems,"");

			}else{
				$(this).addClass("uncheckedborder")
				selList += "#"+ selItems;
			}
			
			var numItems = $('.check').length;
		    $(this).toggleClass("check");
		    
// 		    $(this).toggleClass("uncheckedborder");

		    
		    numItems = $('.check').length; 

		    
			if(numItems >= 5){
				  $("#followbtn").attr("disabled", false);
			
			}else{
				  $("#followbtn").attr("disabled", true);
			
			}
			
			if(numItems != 0){
					 $("#followbtn").html( "<strong>" + numItems  + "개의 주제를 팔로우</strong>");
				  }else{
					 $("#followbtn").html( "<strong>주제를 팔로우 하세요</strong>");
				  }
			
			
// 			$("#selTest").html("<span>" + selList + "</span>")
			
		});
    
	}); 
	
</script>
</head>
<body>

	<!-- 헤더 -->
	<header id="header"></header>

	<!-- body content -->
<section style="background-color: #e9e9e9;">

<br>
<br>
<br>

	<div class="top-content">
		<div class="inner-bg">
			<div class="container">
				<div class="row">
					<div class="col-sm-7 text">
						<h1 style="text-shadow: 1px 1px 1px;">
							<strong>PEEKis</strong> 지금 <span style="color: red;">피키즈</span>에
							가입하세요.
						</h1>
						
						
						<div class="description">
							<h5> PEEKis에서 전 세계에 있는 친구, 가족, 지인들의 WISH LIST를 확인하실 수 있습니다.</h5>
							<br> 
							<img src="img/gifts_generic.gif" width="80%"
								style="padding-left: 20px;">
						</div>
						<!--                             <div class="top-big-link"> -->
						<!--                             	<a class="btn btn-link-1" href="#">Button 1</a> -->
						<!--                             	<a class="btn btn-link-2" href="#">Button 2</a> -->
						<!--                             </div> -->
					</div>
					<div class="col-sm-5 form-box">
						<div class="form-top">
							<div class="form-top-left">
								<h3 style="text-shadow: 1px 1px 1px;">가입하기</h3>
								<h5>Fill in the form below to get instant access:</h5>
							</div>
							<div class="form-top-right" align="right">
								<i class="fa fa-pencil"></i>
							</div>
						</div>
						<div class="form-bottom">
							<form role="form"  method="post" id="defaultForm" 
								class="registration-form" >
								<div class="form-group">
									<label class="sr-only" for="form-first-name">User name</label>
									<input type="text" name="name"
										placeholder="User name..."
										class="form-first-name form-control" id="name" required>
								</div>
								<!-- <div class="form-group">
									<label class="sr-only" for="form-last-name">Last name</label> <input
										type="text" name="lastName" placeholder="Last name..."
										class="form-last-name form-control" id="form-last-name">
								</div> -->
								<div class="form-group">
									<label class="sr-only" for="form-email">Email</label> <input
										type="text" name="email" placeholder="Email..."
										class="form-email form-control" id="email" required>
								</div>
								<!-- <div class="form-group">
									<label class="sr-only" for="form-email">Email confirm</label> <input
										type="text" name="emailConfirm" placeholder="Re-enter Email..."
										class="form-email form-control" id="emailConfirm">
								</div> -->
								<div class="form-group">
									<label class="sr-only" for="form-password">password</label> <input
										type="password" name="password" placeholder="password..."
										class="form-password form-control" id="password">
								</div>
								<div class="form-group">
									<label class="sr-only" for="form-about-yourself">About
										yourself</label>
									<textarea name="aboutYourself"
										placeholder="About yourself..."
										class="form-about-yourself form-control"
										id="aboutYourself"></textarea>
								</div>
								<button type="submit" class="btn btn-orange" id="registIn"
									data-toggle="modal" >가입하기</button> <!-- data-target="#myModal" -->
									<span class="dupEmailCk" style="color: #E84343; padding-left: 10px; " ></span>
									<br>
									<br>
									
									<p style="color: gray;font-size:x-small;">가입과 동시에 귀하는 <a href="#">쿠키 사용</a>을 포함해 <a href="#">이용약관</a>과 <a href="#">개인정보 취급방침</a>에 동의하는 것입니다. 다른 사람들이 내가 입력한 이메일 또는 이름으로 나를 찾을 수 있습니다.</p>
							</form>
							
						</div>
					</div>
				</div>
			</div>
		</div>

	</div>
<br>
<div style="border: 0px solid black; ">
<h4 align="center" style="font-size: small; color:#DCE5E8; "> <a class="upfo" href="#">PeeKIS소개</a> &nbsp;&nbsp;&nbsp; <a class="upfo" href="#">블로그</a>&nbsp;&nbsp;&nbsp; <a class="upfo" href="#">관련기사</a>&nbsp;&nbsp;&nbsp; <a class="upfo" href="#">사업체</a>&nbsp;&nbsp;&nbsp; <a  class="upfo" href="#">서비스약관 및 개인보호 보호정책</a>&nbsp;&nbsp;&nbsp; <a  class="upfo" href="#">도움말</a> </h4>
</div>


	<!-- Modal -->
	<div class="modal fade" id="myModal" tabindex="-1" role="dialog"
		aria-labelledby="myModalLabel">
		<div class="modal-dialog modal-lg" role="document">
			<div class="modal-content">
				<div class="modal-header">
					<button type="button" class="close" data-dismiss="modal"
						aria-label="Close">
						<span aria-hidden="true">&times;</span>
					</button>
					<h4 class="modal-title" id="myModalLabel">자신이 원하는 주제를 팔로우 하세요. <span style="font-size:small; color: tomato;">(5개 이상 선택)</span></h4> <span class="asd"></span>
				</div>

				<!-- 모달 바디 -->
				<div class="modal-body">
				<div class="row"  >
				
					<!--선택이미지  -->
					<div class="col-md-3" >
						<input type="hidden" value="1">
						<div>여성</div>
						<a class="tooltips" href="#" >
						<img src="img/woman.jpg" alt="..." class="img-thumbnail img-check"  title="여성" ></a>
					
					</div>
					
					<div class="col-md-3">
						<input type="hidden" value="2">
						<div>남성</div>
						<a href="#"><img src="img/man.jpg" alt="..." class="img-thumbnail img-check"></a><!-- <span class="imgn" title="남성"></span> -->
					</div>

					<div class="col-md-3">
						<input type="hidden" value="3">
						<div>유·아동</div>
						<a class="tooltips" href="#"><img src="img/kids.jpg" alt="..." class="img-thumbnail img-check"><!-- <span>kids</span> --></a>
					</div>
					
					<div class="col-md-3">
						<input type="hidden" value="4">
						<div>여행</div>
						<a class="tooltips" href="#"><img src="img/trip.png" alt="..." class="img-thumbnail img-check"><!-- <span>baby</span> --></a>
					</div>
					
					<div class="col-md-3">
						<input type="hidden" value="5">
						<div>동물</div>
						<a class="tooltips" href="#"><img src="img/animal.jpg" alt="..." class="img-thumbnail img-check"><!-- <span>animal</span> --></a>
					</div>
					<div class="col-md-3">
						<input type="hidden" value="6">
						<div>악세서리</div>
						<a class="tooltips" href="#"><img src="img/Accessory-Designer-Intro.jpg" alt="..." class="img-thumbnail img-check"><!-- <span>Accessory</span> --></a>
					</div>
					<div class="col-md-3">
						<input type="hidden" value="7">
						<div>IT</div>
						<a class="tooltips" href="#"><img src="img/it.jpg" alt="..." class="img-thumbnail img-check"><!-- <span>IT</span> --></a>
					</div>
					<div class="col-md-3">
						<input type="hidden" value="8">
						<div>스포츠</div>
						<a class="tooltips" href="#"><img src="img/sports.jpg" alt="..." class="img-thumbnail img-check"><!-- <span>sports</span> --></a>
					</div>
					<div class="col-md-3">
						<input type="hidden" value="9">
						<div>코스메틱</div>
						<a class="tooltips" href="#"><img src="img/cosmetic.jpg" alt="..." class="img-thumbnail img-check"><!-- <span>cosmetic</span> --></a>
					</div>
					<div class="col-md-3">
						<input type="hidden" value="10">
						<div>악기</div>
						<a class="tooltips" href="#"><img src="img/instruments.jpg" alt="..." class="img-thumbnail img-check"><!-- <span>instrument</span> --></a>
					</div>
					<div class="col-md-3">
						<input type="hidden" value="11">
						<div>자동차</div>
						<a class="tooltips" href="#"><img src="img/car.JPG" alt="..." class="img-thumbnail img-check"><!-- <span>car</span> --></a>
					</div>
					<div class="col-md-3">
						<input type="hidden" value="12">
						<div>음식</div>
						<a class="tooltips" href="#"><img src="img/food.jpg" alt="..." class="img-thumbnail img-check"><!-- <span>watch</span> --></a>
					</div>
					<div class="col-md-3">
						<input type="hidden" value="13">
						<div>가방</div>
						<a class="tooltips" href="#"><img src="img/bag.jpg" alt="..." class="img-thumbnail img-check"><!-- <span>bag</span> --></a>
					</div>
					<div class="col-md-3">
						<input type="hidden" value="14">
						<div>신발</div>
						<a class="tooltips" href="#"><img src="img/shoes.jpg" alt="..." class="img-thumbnail img-check"><!-- <span>shoes</span> --></a>
					</div>
					<div class="col-md-3">
						<input type="hidden" value="15">
						<div>책</div>
						<a class="tooltips" href="#"><img src="img/book.jpg" alt="..." class="img-thumbnail img-check"><!-- <span>book</span> --></a>
					</div>
					<div class="col-md-3">
						<input type="hidden" value="16">
						<div>가구</div>
						<a class="tooltips" href="#"><img src="img/furniture.jpg" alt="..." class="img-thumbnail img-check"><!-- <span>furniture</span> --></a>
					</div>

</div><!-- div row -->
				</div>
				
				<!--  모달 푸터 -->
				<div class="modal-footer">

						 <div class="container-fluid">
	 	<button  class="btn btn-lg btn-orange" id="followbtn" ><strong>주제를 팔로우 하세요</strong></button><span id="selTest"></span>	
	 </div>

				</div>
			</div>
		</div>
	</div>
	


</section>




	<!-- Footer -->
	<footer id="footer">

	</footer>
	

<script>
		$("#header").load("../header/loginHeader.html");
		$("#footer").load("../footer/footer.html");
</script>	
	
</body>

</html>
